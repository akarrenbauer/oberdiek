\NeedsTeXFormat{LaTeX2e}

\newcommand*{\Title}{Overview}
\newcommand*{\CTANdir}{macros/latex/contrib/ho-kv/}
\newcommand*{\CTANroot}{ftp://ftp.ctan.org/tex-archive/}
\newcommand*{\Subject}{CTAN:\CTANdir}
\newcommand*{\Author}{Heiko Oberdiek}
\newcommand*{\Email}{ho-tex at tug.org}
\newcommand*{\Date}{2018/11/30}

% Copyright (C) 2006-2018 by
%    Heiko Oberdiek <heiko.oberdiek at googlemail.com>
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either
% version 1.3 of this license or (at your option) any later
% version. The latest version of this license is in
%    http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of
% LaTeX version 2003/12/01 or later.
%
% This work has the LPPL maintenance status "maintained".
%
% This Current Maintainer of this work is Heiko Oberdiek.
%
% This work consists of the overview "oberdiek.pdf", its source
% "oberdiek.tex", and the installation script "oberdiek.ins"
% for the projects in CTAN:macros/latex/contrib/oberdiek/.
%
\documentclass[a4paper,12pt]{article}

\usepackage{ifluatex}
\ifluatex
  \usepackage{fontspec}[2011/09/18]%
  \usepackage{unicode-math}[2011/09/19]%
  \setmathfont{latinmodern-math.otf}%
\fi

\usepackage[
  ignorehead,
  top=1in,
]{geometry}
\usepackage{longtable}
\usepackage{color}
\usepackage[ngerman,english]{babel}
\usepackage{hologo}
\usepackage{biblatex}% for internals in .toc files

\definecolor{link}{rgb}{1,0,0}% red
\definecolor{file}{rgb}{0,0,1}% blue
\definecolor{url}{cmyk}{0.1,1,0,0.1}

\definecolor{file}{rgb}{1,0,0}% red
\definecolor{url}{rgb}{0,0,1}% blue
\definecolor{link}{rgb}{0,0.75,0}%

\usepackage[
  colorlinks,
]{hyperref}[2006/02/12]
\hypersetup{
  pdftitle={CTAN:\CTANdir},
  pdfsubject={Package Overview},
  pdfauthor={\Author\ <\Email>},
  bookmarksnumbered,
  bookmarksopen,
  bookmarksopenlevel=2,
  bookmarksdepth=2,
  filecolor=file,
  urlcolor=url,
  linkcolor=link,
}
\usepackage{bookmark}
\usepackage{hypdestopt}
\setcounter{tocdepth}{1}
\setcounter{secnumdepth}{1}

\title{%
  \href{\CTANroot\CTANdir}{CTAN:\CTANdir}%
}
\author{%
  \Author\\
  \textless
  \href{mailto:\Email}{\texttt{\Email}}%
  \textgreater
}
\date{\Date}

\providecommand*{\pdfTeX}{pdf\TeX}
\providecommand*{\plainTeX}{\mbox{plain-\TeX}}
\providecommand*{\iniTeX}{\mbox{ini-\TeX}}
\providecommand*{\VTeX}{V\TeX}
\providecommand*{\eTeX}{$\csname m@th\endcsname\varepsilon$-\TeX}
\providecommand*{\LuaTeX}{%
  L\textsc{ua}\TeX
}
\newcommand*{\xpackage}[1]{\textsf{#1}}
\newcommand*{\xmodule}[1]{\textsf{#1}}
\newcommand*{\xfile}[1]{\texttt{#1}}
\newcommand*{\xext}[1]{\texttt{.#1}}
\newcommand*{\xoption}[1]{\textsf{#1}}
\newcommand*{\cs}[1]{\texttt{\textbackslash#1}}
\newcommand*{\meta}[1]{%
  \ensuremath\langle
  \textit{#1}%
  \ensuremath\rangle
}

\makeatletter
\g@addto@macro\abstract{\noindent\ignorespaces}

\newcommand*{\tocinclude}[1]{%
  \setcounter{tocdepth}{3}%
  \begingroup
    \makeatletter
    \def\@prj{#1}%
    \let\contentsline\foreign@contentsline
    \input{\@prj.toc}%
  \endgroup
}
\def\foreign@contentsline#1#2#3#4{%
  \ifx\\#4\\%
    \csname l@#1\endcsname{#2}{#3}%
  \else
    \ifHy@linktocpage
      \csname l@#1\endcsname{{#2}}{%
        \hyper@linkfile{#3}{\@prj.pdf}{#4}%
      }%
    \else
      \csname l@#1\endcsname{%
        \hyper@linkfile{#2}{\@prj.pdf}{#4}%
      }{#3}%
    \fi
  \fi
}%

\newenvironment{overview}{%
  \setlength{\tabcolsep}{0.8\tabcolsep}%
  \setlength{\LTleft}{0pt}%
  \longtable{@{}llll@{}}
}{%
  \endlongtable
}
\newcommand*{\entry}[4]{%
  \href{file:#1.pdf}{%
    \bfseries\xpackage{#1}%
  }%
  & #2%
  & v#3%
  & \href{\CTANroot\CTANdir #1.pdf}{[pdf]} %
    \href{\CTANroot\CTANdir #1.dtx}{[dtx]}
  \\*%
  \hyperref[{#1}]{\small (contents)}%
  &
  \multicolumn{2}{l}{%
    #4%
  }%
  \\%
}
\newcommand*{\entrysep}{1.5ex}

\newcommand*{\pkgsectformat}[1]{%
  \texorpdfstring{%
    \textcolor{link}{The} %
    \xpackage{#1} %
    \textcolor{link}{package}%
  }{#1}%
}

\makeatother

\begin{document}
\maketitle

\section{Overview}
\begin{overview}
\entry{kvdefinekeys}{2011/04/07}{1.3}{Define keys}%
[\entrysep]
\entry{kvoptions}{2011/06/30}{3.11}{Key value format for package options}%
[\entrysep]
\entry{kvsetkeys}{2012/04/25}{1.16}{Key value parser}%
\end{overview}

\section{Packages}
\hypersetup{bookmarksnumbered=false}

\subsection{\pkgsectformat{accsupp}}
\label{accsupp}
\begin{abstract}
Since PDF 1.5 portions of a page can be marked for better
accessibility support.
For example, replacement texts or expansions of abbreviations can be
provided. Package \xpackage{accsupp} starts with providing a minimal
low-level interface for programmers. Status is experimental.
\end{abstract}
\subsection{\pkgsectformat{kvdefinekeys}}
\label{kvdefinekeys}
\begin{abstract}
Package \xpackage{kvdefinekeys} provides \cs{kv@define@key} to define
keys the same way as \xpackage{keyval}'s \cs{define@key}. However, it
works also using \iniTeX.
\end{abstract}
\tocinclude{kvdefinekeys}

\newpage
\subsection{\pkgsectformat{kvoptions}}
\label{kvoptions}
\begin{abstract}
This package is intended for package authors who want to
use options in key value format for their package options.
\end{abstract}
\tocinclude{kvoptions}

\newpage
\subsection{\pkgsectformat{kvsetkeys}}
\label{kvsetkeys}
\begin{abstract}
Package \xpackage{kvsetkeys} provides \cs{kvsetkeys}, a variant
of package \xpackage{keyval}'s \cs{setkeys}. It allows to specify
a handler that deals with unknown options. Active commas and equal
signs may be used (e.g. see \xpackage{babel}'s shorthands) and
only one level of curly braces is removed from the values.
\end{abstract}
\tocinclude{kvsetkeys}
\end{document}
